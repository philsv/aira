{"openapi":"3.1.0","info":{"title":"AIRA - Agentic Information Retrieval Assistant","description":"API for document upload, question answering, and feedback collection","version":"0.1.0"},"servers":[{"url":"http://localhost:8000","description":"Development server"}],"paths":{"/":{"get":{"tags":["Health"],"summary":"Health Check","description":"Health check endpoint to verify if the API is running","operationId":"get_health_check","responses":{"200":{"description":"API is running successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthCheckResponse"},"example":{"status":"healthy","message":"API is running successfully","api_name":"Agentic Information Retrieval Assistant","version":"0.1.0"}}}}}}},"/documents/upload":{"post":{"tags":["Documents"],"summary":"Upload Document","description":"Upload a document for processing","operationId":"post_documents_upload","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_post_documents_upload"}}},"required":true},"responses":{"200":{"description":"Document uploaded successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentResponse"},"example":{"document_id":"12345","filename":"example.pdf","status":"processed","message":"Document uploaded successfully and is being processed","upload_time":"2023-10-01T12:00:00Z"}}}},"400":{"description":"Invalid file type","content":{"application/json":{"example":{"detail":"Only PDF documents are supported"}}}},"409":{"description":"Document with the same filename already exists","content":{"application/json":{"example":{"detail":"Document with filename 'example.pdf' already exists"}}}},"500":{"description":"Internal server error","content":{"application/json":{"example":{"detail":"An unexpected error occurred"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/documents/upload-sync":{"post":{"tags":["Debugging"],"summary":"Upload Document Sync","description":"Upload and process a document synchronously for debugging","operationId":"post_documents_upload_sync","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_post_documents_upload_sync"}}},"required":true},"responses":{"200":{"description":"Document uploaded and processed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentResponse"},"example":{"document_id":"12345","filename":"example.pdf","status":"processed","message":"Document processed successfully","upload_time":"2023-10-01T12:00:00Z"}}}},"400":{"description":"Invalid file type","content":{"application/json":{"example":{"detail":"Only PDF documents are supported"}}}},"409":{"description":"Document with the same filename already exists","content":{"application/json":{"example":{"detail":"Document with filename 'example.pdf' already exists"}}}},"500":{"description":"Internal server error","content":{"application/json":{"example":{"detail":"An unexpected error occurred"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/documents":{"get":{"tags":["Documents"],"summary":"List Documents","description":"List all uploaded documents","operationId":"get_documents","responses":{"200":{"description":"List of documents","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Documents"},"example":{"documents":[{"id":"12345","filename":"example.pdf","file_path":"/path/to/s3/example.pdf","status":"processed","upload_time":"2023-10-01T12:00:00Z","processed_time":"2023-10-01T12:05:00Z","file_size":204800,"content_preview":"This is a preview of the document content."}]}}}},"500":{"description":"Internal server error","content":{"application/json":{"example":{"detail":"An unexpected error occurred"}}}}}}},"/documents/{document_id}/status":{"get":{"tags":["Documents"],"summary":"Get Document Status","description":"Get the processing status of a specific document","operationId":"get_documents_by_id_status","parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"string","title":"Document Id"}}],"responses":{"200":{"description":"Document status retrieved successfully","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Documents By Id Status"},"example":{"document_id":"12345","status":"processed","filename":"example.pdf","upload_time":"2023-10-01T12:00:00Z","processed_time":"2023-10-01T12:05:00Z"}}}},"404":{"description":"Document not found","content":{"application/json":{"example":{"detail":"Document not found"}}}},"500":{"description":"Internal server error","content":{"application/json":{"example":{"detail":"An unexpected error occurred"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/documents/{document_id}":{"delete":{"tags":["Documents"],"summary":"Delete Document","description":"Delete a specific document","operationId":"delete_documents_by_id","parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"string","title":"Document Id"}}],"responses":{"200":{"description":"Document deleted successfully","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Delete Documents By Id"},"example":{"message":"Document deleted successfully"}}}},"404":{"description":"Document not found","content":{"application/json":{"example":{"detail":"Document not found"}}}},"500":{"description":"Internal server error","content":{"application/json":{"example":{"detail":"An unexpected error occurred"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/qa/ask":{"post":{"tags":["Question Answering"],"summary":"Ask Question","description":"Ask a question to an AI model based on uploaded documents","operationId":"post_qa_ask","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuestionRequest"}}},"required":true},"responses":{"200":{"description":"Question answered successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuestionResponse"},"example":{"question":"What is the capital of France?","answer":"The capital of France is Paris.","confidence_score":0.85,"sources":[{"point_id":"point123","document_id":"12345","document_name":"example.pdf","content":"This is a preview of the document content.","score":0.85}],"processing_time":1.23,"session_id":"session123"}}}},"400":{"description":"Invalid question format","content":{"application/json":{"example":{"detail":"Question must be a non-empty string"}}}},"500":{"description":"Internal server error","content":{"application/json":{"example":{"detail":"An unexpected error occurred"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/qa/history":{"get":{"tags":["Question Answering"],"summary":"Get Qa History","description":"Get the history of question-answer pairs","operationId":"get_qa_history","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"QA history retrieved successfully","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Qa History"},"example":{"history":[{"id":"session123","question":"What is the capital of France?","answer":"The capital of France is Paris.","timestamp":"2023-10-01T12:00:00Z","document_ids":["1234523456"],"confidence_score":0.85,"processing_time":1.23,"feedback_rating":4}]}}}},"500":{"description":"Internal server error","content":{"application/json":{"example":{"detail":"An unexpected error occurred"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/feedback":{"post":{"tags":["Feedback"],"summary":"Submit Feedback","description":"Submit feedback for a question-answer pair","operationId":"post_feedback","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeedbackRequest"}}}},"responses":{"200":{"description":"Feedback submitted successfully","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Post Feedback"},"example":{"message":"Feedback submitted successfully"}}}},"400":{"description":"Invalid feedback format","content":{"application/json":{"example":{"detail":"Feedback must include session_id, question, and rating"}}}},"500":{"description":"Internal server error","content":{"application/json":{"example":{"detail":"An unexpected error occurred"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Feedback"],"summary":"Get Feedback History","description":"Get the history of feedback submissions","operationId":"get_feedback","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Feedback history retrieved successfully","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Feedback"},"example":{"feedback":[{"session_id":"session123","question":"What is the capital of France?","answer":"The capital of France is Paris.","rating":4,"comments":"Good answer, but could include more details.","is_helpful":true,"timestamp":"2023-10-01T12:00:00Z"}]}}}},"500":{"description":"Internal server error","content":{"application/json":{"example":{"detail":"An unexpected error occurred"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/feedback/{session_id}":{"delete":{"tags":["Feedback"],"summary":"Delete Feedback","description":"Delete feedback for a specific session","operationId":"delete_feedback_by_session_id","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"responses":{"200":{"description":"Feedback deleted successfully","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Delete Feedback By Session Id"},"example":{"message":"Feedback deleted successfully"}}}},"404":{"description":"Feedback not found","content":{"application/json":{"example":{"detail":"Feedback not found"}}}},"500":{"description":"Internal server error","content":{"application/json":{"example":{"detail":"An unexpected error occurred"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"Body_post_documents_upload":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_post_documents_upload"},"Body_post_documents_upload_sync":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_post_documents_upload_sync"},"DocumentResponse":{"properties":{"document_id":{"type":"string","title":"Document Id"},"filename":{"type":"string","title":"Filename"},"status":{"$ref":"#/components/schemas/DocumentStatus"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"},"upload_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Upload Time"}},"type":"object","required":["document_id","filename","status"],"title":"DocumentResponse"},"DocumentStatus":{"type":"string","enum":["uploaded","processing","processed","error"],"title":"DocumentStatus"},"FeedbackRequest":{"properties":{"session_id":{"type":"string","title":"Session Id"},"question":{"type":"string","title":"Question"},"answer":{"type":"string","title":"Answer"},"rating":{"type":"integer","maximum":5.0,"minimum":1.0,"title":"Rating"},"comment":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Comment"},"is_helpful":{"type":"boolean","title":"Is Helpful"}},"type":"object","required":["session_id","question","answer","rating","is_helpful"],"title":"FeedbackRequest"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HealthCheckResponse":{"properties":{"status":{"type":"string","title":"Status"},"message":{"type":"string","title":"Message"},"api_name":{"type":"string","title":"Api Name"},"version":{"type":"string","title":"Version"}},"type":"object","required":["status","message","api_name","version"],"title":"HealthCheckResponse"},"QuestionRequest":{"properties":{"question":{"type":"string","maxLength":1000,"minLength":1,"title":"Question"}},"type":"object","required":["question"],"title":"QuestionRequest"},"QuestionResponse":{"properties":{"question":{"type":"string","title":"Question"},"answer":{"type":"string","title":"Answer"},"confidence_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Confidence Score"},"sources":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Sources","default":[]},"processing_time":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Processing Time"},"session_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"}},"type":"object","required":["question","answer"],"title":"QuestionResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}